{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AllTransactionsPage=()=>{const[transactions,setTransactions]=useState([]);const[users,setUsers]=useState([]);// Za mapiranje ID-eva na usernames\nconst[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const fetchData=async()=>{setLoading(true);try{const txResponse=await axios.get('http://localhost:5000/transactions?_sort=date&_order=desc');setTransactions(txResponse.data);const usersResponse=await axios.get('http://localhost:5000/users');setUsers(usersResponse.data);}catch(err){setError('Greška pri učitavanju transakcija ili korisnika.');console.error(err);}finally{setLoading(false);}};fetchData();},[]);const getUserNameById=userId=>{const user=users.find(u=>u.id===userId);return user?user.username:'Nepoznat';};const handleDeleteTransaction=async id=>{if(window.confirm('Da li ste sigurni da želite da obrišete ovu transakciju?')){try{await axios.delete(\"http://localhost:5000/transactions/\".concat(id));setTransactions(transactions.filter(tx=>tx.id!==id));}catch(err){setError('Greška pri brisanju transakcije.');console.error(err);}}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-lg mt-8\",children:\"U\\u010Ditavanje svih transakcija...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"py-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-gray-900 mb-8 text-center\",children:\"Sve Transakcije\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl\",children:[error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs italic mb-4\",children:error}),transactions.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-center\",children:\"Nema transakcija u sistemu.\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full bg-white\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border-b text-left\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border-b text-left\",children:\"Po\\u0161iljalac\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border-b text-left\",children:\"Primalac\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border-b text-left\",children:\"Iznos\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border-b text-left\",children:\"Valuta\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border-b text-left\",children:\"Datum\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border-b text-left\",children:\"Akcije\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:transactions.map(tx=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border-b text-sm\",children:tx.id}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border-b\",children:getUserNameById(tx.senderId)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border-b\",children:getUserNameById(tx.receiverId)}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border-b\",children:tx.amount}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border-b\",children:tx.currency}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border-b text-sm\",children:new Date(tx.date).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border-b\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteTransaction(tx.id),className:\"bg-red-500 hover:bg-red-700 text-white text-sm py-1 px-2 rounded\",children:\"Obri\\u0161i\"})})]},tx.id))})]})]})]});};export default AllTransactionsPage;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","AllTransactionsPage","transactions","setTransactions","users","setUsers","loading","setLoading","error","setError","fetchData","txResponse","get","data","usersResponse","err","console","getUserNameById","userId","user","find","u","id","username","handleDeleteTransaction","window","confirm","delete","concat","filter","tx","className","children","length","map","senderId","receiverId","amount","currency","Date","date","toLocaleString","onClick"],"sources":["C:/Users/HP/Desktop/IT354 Veb Sistemi1/crypto-wallet-app/src/pages/AllTransactionsPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst AllTransactionsPage = () => {\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [users, setUsers] = useState([]); // Za mapiranje ID-eva na usernames\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const txResponse = await axios.get('http://localhost:5000/transactions?_sort=date&_order=desc');\r\n        setTransactions(txResponse.data);\r\n\r\n        const usersResponse = await axios.get('http://localhost:5000/users');\r\n        setUsers(usersResponse.data);\r\n      } catch (err) {\r\n        setError('Greška pri učitavanju transakcija ili korisnika.');\r\n        console.error(err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  const getUserNameById = (userId) => {\r\n    const user = users.find(u => u.id === userId);\r\n    return user ? user.username : 'Nepoznat';\r\n  };\r\n\r\n  const handleDeleteTransaction = async (id) => {\r\n    if (window.confirm('Da li ste sigurni da želite da obrišete ovu transakciju?')) {\r\n      try {\r\n        await axios.delete(`http://localhost:5000/transactions/${id}`);\r\n        setTransactions(transactions.filter(tx => tx.id !== id));\r\n      } catch (err) {\r\n        setError('Greška pri brisanju transakcije.');\r\n        console.error(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"text-center text-lg mt-8\">Učitavanje svih transakcija...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"py-8\">\r\n      <h1 className=\"text-4xl font-bold text-gray-900 mb-8 text-center\">Sve Transakcije</h1>\r\n      <div className=\"bg-white p-6 rounded-lg shadow-xl\">\r\n        {error && <p className=\"text-red-500 text-xs italic mb-4\">{error}</p>}\r\n        {transactions.length === 0 ? (\r\n          <p className=\"text-gray-600 text-center\">Nema transakcija u sistemu.</p>\r\n        ) : (\r\n          <table className=\"min-w-full bg-white\">\r\n            <thead>\r\n              <tr>\r\n                <th className=\"py-2 px-4 border-b text-left\">ID</th>\r\n                <th className=\"py-2 px-4 border-b text-left\">Pošiljalac</th>\r\n                <th className=\"py-2 px-4 border-b text-left\">Primalac</th>\r\n                <th className=\"py-2 px-4 border-b text-left\">Iznos</th>\r\n                <th className=\"py-2 px-4 border-b text-left\">Valuta</th>\r\n                <th className=\"py-2 px-4 border-b text-left\">Datum</th>\r\n                <th className=\"py-2 px-4 border-b text-left\">Akcije</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {transactions.map(tx => (\r\n                <tr key={tx.id} className=\"hover:bg-gray-50\">\r\n                  <td className=\"py-2 px-4 border-b text-sm\">{tx.id}</td>\r\n                  <td className=\"py-2 px-4 border-b\">{getUserNameById(tx.senderId)}</td>\r\n                  <td className=\"py-2 px-4 border-b\">{getUserNameById(tx.receiverId)}</td>\r\n                  <td className=\"py-2 px-4 border-b\">{tx.amount}</td>\r\n                  <td className=\"py-2 px-4 border-b\">{tx.currency}</td>\r\n                  <td className=\"py-2 px-4 border-b text-sm\">{new Date(tx.date).toLocaleString()}</td>\r\n                  <td className=\"py-2 px-4 border-b\">\r\n                    <button\r\n                      onClick={() => handleDeleteTransaction(tx.id)}\r\n                      className=\"bg-red-500 hover:bg-red-700 text-white text-sm py-1 px-2 rounded\"\r\n                    >\r\n                      Obriši\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AllTransactionsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}